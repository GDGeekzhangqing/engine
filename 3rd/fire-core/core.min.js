var FIRE;!function(t){function e(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}t.extend=function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},t.enum=function(){};var i=function(e,i,r,n){var o,s,a,h,l=i,c=r,d=0,u=0,f=4*i;for(s=0;r>s;s++)for(h=s*f+3,o=0;i>o;o++,h+=4)if(e[h]>=n){c=s,s=r;break}for(s=r-1;s>=c;s--)for(h=s*f+3,o=0;i>o;o++,h+=4)if(e[h]>=n){u=s-c+1,s=0;break}var g=f*c;for(o=0;i>o;o++)for(h=g+4*o+3,a=0;u>a;a++,h+=f)if(e[h]>=n){l=o,o=i;break}for(o=i-1;o>=l;o--)for(h=g+4*o+3,a=0;u>a;a++,h+=f)if(e[h]>=n){d=o-l+1,o=0;break}return new t.Rect(l,c,d,u)};t.getClassName=function(t){if(t&&t.constructor){if(t.constructor.prototype&&t.constructor.prototype.hasOwnProperty("__classname__"))return t.__classname__;var e;if(t.constructor.name&&(e=t.constructor.name),t.constructor.toString){var i,r=t.constructor.toString();i=r.match("["===r.charAt(0)?/\[\w+\s*(\w+)\]/:/function\s*(\w+)/),i&&2===i.length&&(e=i[1])}return"Object"!==e?e:null}return null},t.getEnumList=function(t){if(void 0!==t.__enums__)return t.__enums__;var e=[];for(var i in t)if(t.hasOwnProperty(i)){var r=parseInt(i);isNaN(r)&&e.push({name:t[t[i]],value:t[i]})}return e.sort(function(t,e){return t.value-e.value}),t.__enums__=e,t.__enums__},t.getVarFrom=function(t,e){for(var i=e.split("."),r=t,n=0;n<i.length;++n){var o=i[n];if(r=r[o],void 0===r||null===r)return null}return r},t.rgb2hsv=function(t,e,i){var r={h:0,s:0,v:0},n=Math.max(t,e,i),o=Math.min(t,e,i),s=0;return r.v=n,r.s=n?(n-o)/n:0,r.s?(s=n-o,r.h=t==n?(e-i)/s:e==n?2+(i-t)/s:4+(t-e)/s,r.h/=6,r.h<0&&(r.h+=1)):r.h=0,r},t.hsv2rgb=function(t,e,i){var r={r:0,g:0,b:0};if(0===e)r.r=r.g=r.b=i;else if(0===i)r.r=r.g=r.b=0;else{1===t&&(t=0),t*=6,e=e,i=i;var n=Math.floor(t),o=t-n,s=i*(1-e),a=i*(1-e*o),h=i*(1-e*(1-o));switch(n){case 0:r.r=i,r.g=h,r.b=s;break;case 1:r.r=a,r.g=i,r.b=s;break;case 2:r.r=s,r.g=i,r.b=h;break;case 3:r.r=s,r.g=a,r.b=i;break;case 4:r.r=h,r.g=s,r.b=i;break;case 5:r.r=i,r.g=s,r.b=a}}return r},t.camelCaseToHuman=function(t){var e=t.replace(/([A-Z])/g," $1");return" "==e.charAt(0)&&e.slice(1),e.charAt(0).toUpperCase()+e.slice(1)};var r=function(){function i(t){this.serializedList=[],this._parsingObjs=[],this._parsingData=[],this._referencedObjs=[],this.serializedList.push(o(this,t));for(var e=0;e<this._referencedObjs.length;++e)delete this._referencedObjs[e].__id__;this._parsingObjs=null,this._parsingData=null,this._referencedObjs=null}var r=function(e,i){var r=e._parsingObjs.indexOf(i),n=-1!==r;if(n){var o=e.serializedList.length;i.__id__=o,e._referencedObjs.push(i);var s=e._parsingData[r];if(Array.isArray(i)===!1){s.__id__=o;var a=t.getClassName(i);a&&(s.__type__=a)}return e.serializedList.push(s),s}},n=function(t,e,i){var r=t.serializedList.length;if(t._parsingObjs.push(e),t._parsingData.push(i),Array.isArray(e))for(var n=0;n<e.length;++n){var s=e[n],a=typeof s;i.push("object"===a?o(t,s):"function"===a?null:s)}else for(var h in e)if(e.hasOwnProperty(h)!==!1&&"__id__"!==h){var l=e[h],c=typeof l;i[h]="object"===c?o(t,l):"function"===c?null:l}if(t._parsingObjs.pop(),t._parsingData.pop(),t.serializedList.length>r){var d=t.serializedList.indexOf(i,r);if(-1!==d)return d}return-1},o=function(i,o){if(!o)return null;if(e(o))return console.warn(""+o+" won't be serialized"),null;if(o.__id__)return{__id__:o.__id__};var s=r(i,o);if(s)return{__id__:o.__id__};var a;if(Array.isArray(o))a=[];else{a={};var h=t.getClassName(o);h&&(a.__type__=h)}var l=n(i,o,a);return-1===l?a:{__id__:l}};return i}();if(t.serialize=function(t){var e=new r(t),i=e.serializedList,n=1==e.serializedList.length?i[0]:i;return JSON.stringify(n,null,4)},t.FObject=function(){function t(){}t.prototype.__classname__="FIRE.FObject",t.isValid=function(t){return!!t&&!t._destroyed};var e=[];return t._deferredDestroy=function(){for(var t=e.length,i=0;t>i;++i){var r=e[i];r._destroyed||r._destroyImmediate()}t===e.length?e.length=0:e.splice(0,t)},t.prototype.destroy=function(){return this._destroyed?void console.error("object already destroyed"):void e.push(this)},t.prototype._destroyImmediate=function(){return this._destroyed?void console.error("object already destroyed"):(this._onPreDestroy&&this._onPreDestroy(),void(this._destroyed=!0))},t.prototype.__defineGetter__("isValid",function(){return!this._destroyed}),t}(),t.Asset=function(){function e(){i.call(this)}var i=t.FObject;return t.extend(e,i),e.prototype.__classname__="FIRE.Asset",e}(),t.Vec2=function(){function e(t,e){i.call(this),this.x=t,this.y=e}var i=t.FObject;return t.extend(e,i),e.prototype.__classname__="FIRE.Vec2",e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},e}(),t.Rect=function(){function e(t,e,r,n){i.call(this),this.x=t,this.y=e,this.width=r,this.height=n}var i=t.FObject;return t.extend(e,i),e.prototype.__classname__="FIRE.Rect",e.contains=function(t,e){return t.x<=e.x&&t.x+t.width>=e.x+e.width&&t.y<=e.y&&t.y+t.height>=e.y+e.height?1:e.x<=t.x&&e.x+e.width>=t.x+t.width&&e.y<=t.y&&e.y+e.height>=t.y+t.height?-1:0},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.__defineGetter__("xMax",function(){return this.x+this.width}),e.prototype.__defineGetter__("yMax",function(){return this.y+this.height}),e}(),t.Color=function(){function e(t,e,r,n){i.call(this),this.r=t,this.g=e,this.b=r,this.a=n}var i=t.FObject;return t.extend(e,i),e.prototype.__classname__="FIRE.Color",e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.a)},e.prototype.toString=function(){return"rgba("+this.r.toFixed(2)+", "+this.g.toFixed(2)+", "+this.b.toFixed(2)+", "+this.a.toFixed(2)+")"},e.prototype.toCSS=function(t){return"rgba"===t?"rgba("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+","+this.a.toFixed(2)+")":"rgb"===t?"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")":"#"+this.toHEX(t)},e.prototype.equalTo=function(e){return e instanceof t.Color?this.r!==e.r?!1:this.g!==e.g?!1:this.b!==e.b?!1:this.a!==e.a?!1:!0:!1},e.prototype.clamp=function(){this.r=Math.min(1,Math.max(0,this.r)),this.g=Math.min(1,Math.max(0,this.g)),this.b=Math.min(1,Math.max(0,this.b)),this.a=Math.min(1,Math.max(0,this.a))},e.prototype.fromHEX=function(t){var e=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return this.r=e>>16,this.g=(65280&e)>>8,this.b=255&e,this},e.prototype.toHEX=function(t){var e=[(255*this.r|0).toString(16),(255*this.g|0).toString(16),(255*this.b|0).toString(16)],i=-1;if("#rgb"===t)for(i=0;i<e.length;++i)e[i].length>1&&(e[i]=e[i][0]);else if("#rrggbb"===t)for(i=0;i<e.length;++i)1==e[i].length&&(e[i]="0"+e[i]);return e.join("")},e.prototype.fromHSV=function(e,i,r){var n=t.hsv2rgb(e,i,r);return this.r=n.r,this.g=n.g,this.b=n.b,this},e.prototype.toHSV=function(){return t.rgb2hsv(this.r,this.g,this.b)},e}(),t.Texture=function(){function e(t){i.call(this),this.name="",this.image=t,this.width=t.width,this.height=t.height}var i=t.Asset;return t.extend(e,i),e.prototype.__classname__="FIRE.Texture",e}(),t.Sprite=function(){function e(e){i.call(this),this.rawTexture=new t.Texture(e),this.texture=new t.Texture(e),this.rotated=!1,this.trim=!1,this.trimThreshold=1,this.trimX=0,this.trimY=0,this.width=e.width,this.height=e.height,this.x=0,this.y=0}var i=t.Asset;return t.extend(e,i),e.prototype.__classname__="FIRE.Sprite",e.prototype.__defineGetter__("rotatedWidth",function(){return this.rotated?this.height:this.width}),e.prototype.__defineGetter__("rotatedHeight",function(){return this.rotated?this.width:this.height}),e}(),t.Atlas=function(){function e(){i.call(this),this.autoSize=!0,this.width=512,this.height=512,this.trim=!0,this.trimThreshold=1,this.sprites=[],this.algorithm=e.Algorithm.MaxRect,this.sortBy=e.SortBy.UseBest,this.sortOrder=e.SortOrder.UseBest,this.allowRotate=!0,this.useContourBleed=!0,this.usePaddingBleed=!0,this.customPadding=2,this.customBuildColor=!1,this.buildColor=new t.Color(1,1,1,1)}var i=t.Asset;t.extend(e,i),e.prototype.__classname__="FIRE.Atlas",e.Algorithm=function(t){return t[t.Basic=0]="Basic",t[t.Tree=1]="Tree",t[t.MaxRect=2]="MaxRect",t}({}),e.SortBy=function(t){return t[t.UseBest=0]="UseBest",t[t.Width=1]="Width",t[t.Height=2]="Height",t[t.Area=3]="Area",t[t.Name=4]="Name",t}({}),e.SortOrder=function(t){return t[t.UseBest=0]="UseBest",t[t.Ascending=1]="Ascending",t[t.Descending=2]="Descending",t}({}),e.prototype.add=function(t){for(var e=0;e<this.sprites.length;++e){var i=this.sprites[e];if(i.name===t.name)return void(this.sprites[e]=t)}this.sprites.push(t)},e.prototype.remove=function(t){var e=this.sprites.indexOf(t);-1!==e&&this.sprites.splice(e,1)},e.prototype.clear=function(){this.sprites.length=0};var r=function(t){for(var e=0,i=0,r=0,n=0;n<t.sprites.length;++n){var o=t.sprites[n];if(e+o.rotatedWidth>t.width&&(e=0,i=i+r+t.customPadding,r=0),i+o.rotatedHeight>t.height)throw new Error("Warning: Failed to layout element "+o.name);o.x=e,o.y=i,e=e+o.rotatedWidth+t.customPadding,o.rotatedHeight>r&&(r=o.rotatedHeight)}},n=function(e,i,r,o){if(null!==e.right){var s=n(e.right,i,r,o);return null!==s?s:n(e.bottom,i,r,o)}var a=i.rotatedWidth,h=i.rotatedHeight,l=a+r,c=h+r,d=e.rect;if(a>d.width||h>d.height){if(o===!1)return null;if(h>d.width||a>d.height)return null;i.rotated=!i.rotated,a=i.rotatedWidth,h=i.rotatedHeight,l=a+r,c=h+r}return e.right={rect:new t.Rect(d.x+l,d.y,d.width-l,h),right:null,bottom:null},e.bottom={rect:new t.Rect(d.x,d.y+c,d.width,d.height-c),right:null,bottom:null},[d.x,d.y]},o=function(e){for(var i={rect:new t.Rect(0,0,e.width,e.height),right:null,bottom:null},r=0;r<e.sprites.length;++r){var o=e.sprites[r],s=n(i,o,e.customPadding,e.allowRotate);if(null===s)throw new Error("Warning: Failed to layout element "+o.name);o.x=s[0],o.y=s[1]}},s=function(t,e,i){if(i.x>=e.x+e.width||i.x+i.width<=e.x||i.y>=e.y+e.height||i.y+i.height<=e.y)return!1;var r;return i.x<e.x+e.width&&i.x+i.width>e.x&&(i.y>e.y&&i.y<e.y+e.height&&(r=e.clone(),r.height=i.y-r.y,t.push(r)),i.y+i.height<e.y+e.height&&(r=e.clone(),r.y=i.y+i.height,r.height=e.y+e.height-(i.y+i.height),t.push(r))),i.y<e.y+e.height&&i.y+i.height>e.y&&(i.x>e.x&&i.x<e.x+e.width&&(r=e.clone(),r.width=i.x-r.x,t.push(r)),i.x+i.width<e.x+e.width&&(r=e.clone(),r.x=i.x+i.width,r.width=e.x+e.width-(i.x+i.width),t.push(r))),!0},a=function(e,i){var r;for(r=0;r<e.length;++r)s(e,e[r],i)&&(e.splice(r,1),--r);for(r=0;r<e.length;++r)for(var n=r+1;n<e.length;++n){if(-1===t.Rect.contains(e[r],e[n])){e.splice(r,1),--r;break}-1===t.Rect.contains(e[n],e[r])&&(e.splice(n,1),--n)}},h=function(e){var i=[];i.push(new t.Rect(0,0,e.width+e.customPadding,e.height+e.customPadding));for(var r,n=function(e,i,n,o){r=Number.MAX_VALUE,score2=Number.MAX_VALUE;for(var s=new t.Rect(0,0,1,1),a=!1,h=0;h<e.length;++h){var l,c,d,u,f=e[h];f.width>=i&&f.height>=n&&(l=Math.abs(Math.floor(e[h].width)-i),c=Math.abs(Math.floor(e[h].height)-n),d=Math.min(l,c),u=Math.max(l,c),(r>d||d==r&&score2>u)&&(s.x=e[h].x,s.y=e[h].y,s.width=i,s.height=n,r=d,score2=u,a=!0)),o&&f.width>=n&&f.height>=i&&(l=Math.abs(Math.floor(e[h].width)-n),c=Math.abs(Math.floor(e[h].height)-i),d=Math.min(l,c),u=Math.max(l,c),(r>d||d==r&&score2>u)&&(s.x=e[h].x,s.y=e[h].y,s.width=n,s.height=i,r=d,score2=u,a=!0))}return a===!1&&(r=Number.MAX_VALUE,score2=Number.MAX_VALUE),s},o=e.sprites.slice();o.length>0;){for(var s=Number.MAX_VALUE,h=Number.MAX_VALUE,l=-1,c=new t.Rect(0,0,1,1),d=0;d<o.length;++d){var u=n(i,o[d].width+e.customPadding,o[d].height+e.customPadding,e.allowRotate);(s>r||r===s&&h>score2)&&(s=r,h=score2,c=u,l=d)}if(-1===l)throw new Error("Error: Failed to layout atlas element");a(i,c);var f=o[l];f.x=Math.floor(c.x),f.y=Math.floor(c.y),f.rotated=f.width+e.customPadding!==c.width,o.splice(l,1)}};e.prototype.layout=function(){try{switch(this.algorithm){case e.Algorithm.Basic:r(this);break;case e.Algorithm.Tree:o(this);break;case e.Algorithm.MaxRect:h(this)}}catch(t){if(this.autoSize===!1)return void console.error(t.message);if(4096==this.width&&4096==this.height)return void console.error(t.message);this.width===this.height?this.width*=2:this.height=this.width,this.layout()}};var l=function(t,e){var i=t.width-e.width;return 0===i&&(i=t.name.localeCompare(e.name)),i},c=function(t,e){var i=t.height-e.height;return 0===i&&(i=t.name.localeCompare(e.name)),i},d=function(t,e){var i=t.width*t.height-e.width*e.height;return 0===i&&(i=t.name.localeCompare(e.name)),i},u=function(t,e){return t.name.localeCompare(e.name)},f=function(t,e){var i=t.width;t.height>t.width&&(i=t.height,t.rotated=!0);var r=e.width;e.height>e.width&&(r=e.height,e.rotated=!0);var n=i-r;return 0===n&&(n=t.name.localeCompare(e.name)),n},g=function(t,e){var i=t.height;t.width>t.height&&(i=t.width,t.rotated=!0);var r=e.height;e.width>e.height&&(r=e.width,e.rotated=!0);var n=i-r;return 0===n&&(n=t.name.localeCompare(e.name)),n};return e.prototype.sort=function(){for(var t=0;t<this.sprites.length;++t){var i=this.sprites[t];i.rotated=!1}var r=this.sortBy,n=this.sortOrder;if(r===e.SortBy.UseBest)switch(this.algorithm){case e.Algorithm.Basic:r=e.SortBy.Height;break;case e.Algorithm.Tree:r=e.SortBy.Area;break;default:r=e.SortBy.Height}switch(n===e.SortOrder.UseBest&&(n=e.SortOrder.Descending),r){case e.SortBy.Width:this.sprites.sort(this.allowRotate?f:l);break;case e.SortBy.Height:this.sprites.sort(this.allowRotate?g:c);break;case e.SortBy.Area:this.sprites.sort(d);break;case e.SortBy.Name:this.sprites.sort(u)}n===e.SortOrder.Descending&&this.sprites.reverse()},e}(),t.FontInfo=function(){function e(){i.call(this),this.atlas=new t.Atlas,this.charSet="abcdefghijklmnopqrstuvwxyz\nABCDEFGHIJKLMNOPQRSTUVWXYZ\n1234567890;:_,.-(\"*!?')",this.fontFamily="",this.fontSize=50,this.fontWeight="normal",this.fillColor=new t.Color(0,0,0,1),this.strokeColor=new t.Color(1,1,1,1),this.strokeWidth=2,this.strokeJoin="round",this.miterLimit=10,this.shadowColor=new t.Color(0,0,0,.5),this.shadowBlur=2,this.shadowOffset=new t.Vec2(2,2)}var i=t.Asset;return t.extend(e,i),e.prototype.__classname__="FIRE.FontInfo",e}(),t.isNode=!("undefined"==typeof process||!process.versions||!process.versions.node),t.isWeb="undefined"==typeof __dirname||null===__dirname,t.isNw=!!(t.isNode&&"node-webkit"in process.versions),t.isApp=t.isNw,t.isNode)t.isDarwin="darwin"===process.platform,t.isWin32="win32"===process.platform;else{var n=window.navigator.platform;t.isDarwin="Mac"===n.substring(0,3),t.isWin32="Win"===n.substring(0,3)}if(t.isNode){var o=require("fs"),s=require("path");t.Path=s;var a=function(t,e){for(var i=o.readdirSync(t),r=null,n="",h=0;h<i.length;h++){n=s.join(t,i[h]);try{r=o.statSync(n)}catch(l){continue}r.isFile()?e.push(n):r.isDirectory()&&a(n,e)}};t.readDirRecursively=function(e){var i=[];if(Array.isArray(e)){for(var r=0;r<e.length;r++)i=i.concat(t.readDirRecursively(e[r]));return i}var n=null;try{n=o.statSync(e)}catch(s){return[]}return n.isFile()?i.push(e):n.isDirectory()&&a(e,i),i}}else{var h=function(){throw"This function can only be used in node-webkit or server"};t.readDirRecursively=h,t.Path={},t.Path.basename=function(t){return t.replace(/^.*(\\|\/|\:)/,"")},t.Path.extname=function(t){return t.substring((~-t.lastIndexOf(".")>>>0)+1)}}if(t.Path.setExtension=function(t,e){var i=(~-t.lastIndexOf(".")>>>0)+1;return t.substring(0,i)+e},t.isApp&&t.isWeb){if(t.isNw){t.getSavePath=function(t,e,i){var r="SaveFileDialog",n=document.getElementById(r);n&&document.body.removeChild(n),n=document.createElement("input"),document.body.appendChild(n),n.id=r,n.style.display="none",n.type="file",n.nwsaveas=t;var o=localStorage[e];n.nwworkingdir=o||"",n.onchange=function(){document.body.removeChild(n),n.onchange=null,localStorage[e]=this.value,i(this.value)},n.click()};var l=require("nw.gui");t.showItemInFolder=l.Shell.showItemInFolder}}else{var h=function(){throw"This function can only be used in node-webkit or atom-shell"};t.getSavePath=h,t.showItemInFolder=h}if("undefined"!=typeof window){t.getTrimRect=function(t,e){var r,n;t instanceof Image||t instanceof HTMLImageElement?(r=document.createElement("canvas"),r.width=t.width,r.height=t.height,n=r.getContext("2d"),n.drawImage(t,0,0,t.width,t.height)):(r=t,n=r.getContext("2d"));var o=n.getImageData(0,0,r.width,r.height).data;return i(o,t.width,t.height,e)};var c=function(t,e){var i=function(i){i.length&&(d(i,e),c(t,e))};t.readEntries(i)},d=function(t,e){for(var i,r=[],n=0,o=function(t){--n,r.push(t),0===n&&e(r)},s=0;s<t.length;s++)t[s].isDirectory?(i=t[s].createReader(),c(i,e)):(++n,t[s].file(o))};t.getDraggingFiles=function(t,e){var i=t.dataTransfer.items;if(!i)return void e(t.dataTransfer.files);for(var r,n=[],o=0;o<i.length;o++)r=i[o].getAsEntry?i[o].getAsEntry():i[o].webkitGetAsEntry?i[o].webkitGetAsEntry():null,null!==r&&r.isDirectory?d([r],e):n.push(t.dataTransfer.files[o]);n.length>0&&e(n)};var u=function(t,e){var i=document.createElementNS("http://www.w3.org/1999/xhtml","a");i.href=t,i.download=e,i.click()};window.navigator.saveBlob=window.navigator.saveBlob||window.navigator.msSaveBlob,window.URL=window.URL||window.webkitURL,t.downloadBlob=function(t,e){if(window.navigator.saveBlob)window.navigator.saveBlob(t,e);else{var i=window.URL.createObjectURL(t);u(i,e),window.URL.revokeObjectURL(i)}},t.downloadCanvas=function(t,e){if(t.toBlob=t.toBlob||t.msToBlob,t.toBlob&&window.navigator.saveBlob)window.navigator.saveBlob(t.toBlob(),e);else{var i=t.toDataURL("image/png");u(i,e)}},t.imgDataUrlToBase64=function(t){return t.replace(/^data:image\/\w+;base64,/,"")}}t.buildPng=function(e,i,r,n,o){function s(t){return"undefined"!=typeof libpng?(t(libpng),!0):requirejs?(requirejs(["libpng"],t),!0):!1}function a(i){console.time("png");var s=i.createWriter(e.width,e.height);if(s.set_filter(i.FILTER_NONE),s.set_compression_level(3),s.write_imageData(r),s.write_end(),console.timeEnd("png"),n||t.isNode)o({bin:s.data});else{var a=new Blob([new Uint8Array(s.data)],{type:"image/png"});o({blob:a})}}if(s(a)===!1){if(!e)throw"no png encoder nor canvas";if(n||t.isNode){var h=e.toDataURL("image/png"),l=t.imgDataUrlToBase64(h);o({base64:l})}else o({canvas:e})}},t.savePng=function(e,i,r,n){var s=Object.keys(e)[0],a=e[s];return n?void("bin"===s?n.file(i,a):"base64"===s?n.file(i,a,{base64:!0}):console.error("unknown data type to zip")):void(t.isNode?"bin"===s?o.writeFileSync(r,new Buffer(a)):"base64"===s?o.writeFileSync(r,a,{encoding:"base64"}):console.warn("unknown node type: "+s):"blob"===s?t.downloadBlob(a,i):"canvas"===s?t.downloadCanvas(a,i):console.warn("unknown browser type: "+s))},t.saveText=function(e,i,r){if(t.isNode)o.writeFileSync(r,e,{encoding:"ascii"});else{var n=new Blob([e],{type:"text/plain;charset=utf-8"});t.downloadBlob(n,i)}}}(FIRE||(FIRE={})),"undefined"!=typeof module&&module?module.exports=FIRE:"function"==typeof define&&define&&define.amd&&define([],function(){return FIRE});